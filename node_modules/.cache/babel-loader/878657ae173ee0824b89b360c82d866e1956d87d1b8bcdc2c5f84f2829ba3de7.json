{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abdel\\\\Downloads\\\\qr_attendance_pwa_with_camera\\\\src\\\\QRScannerCameraApp.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GOOGLE_SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbxg9ya2e1Pf3vAMSGzwgSex0MtA86IU8YVQ5ufLGhGT-LwnkueU56huPiCoenuJVlNYHg/exec\";\nexport default function QRScannerCameraApp() {\n  _s();\n  const [status, setStatus] = useState(\"\");\n  const [log, setLog] = useState([]);\n  const qrCodeRegionId = \"reader\";\n  const html5QrCodeRef = useRef(null);\n  const handleScanSuccess = async decodedText => {\n    try {\n      const response = await fetch(GOOGLE_SCRIPT_URL, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          scannedId: decodedText\n        })\n      });\n      const result = await response.json();\n      let logEntry = {\n        id: decodedText,\n        time: new Date().toLocaleTimeString()\n      };\n      if (result.status === \"already_scanned\") {\n        logEntry.result = \"ALREADY SCANNED\";\n        setStatus(\"Already Scanned\");\n      } else {\n        logEntry.result = \"SENT\";\n        setStatus(\"Submitted\");\n      }\n      setLog(prev => [...prev, logEntry]);\n    } catch (err) {\n      setStatus(\"Error\");\n    }\n  };\n  useEffect(() => {\n    html5QrCodeRef.current = new Html5Qrcode(qrCodeRegionId);\n    Html5Qrcode.getCameras().then(devices => {\n      if (devices && devices.length) {\n        html5QrCodeRef.current.start({\n          facingMode: \"environment\"\n        }, {\n          fps: 10,\n          qrbox: 250\n        }, handleScanSuccess);\n      }\n    });\n    return () => {\n      html5QrCodeRef.current.stop().then(() => {\n        html5QrCodeRef.current.clear();\n      });\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Scan QR Code\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: qrCodeRegionId,\n      style: {\n        width: \"100%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Status: \", status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: log.map((entry, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [entry.time, \" - \", entry.id, \" - \", entry.result]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(QRScannerCameraApp, \"uF5fHnPUGZRlwy/dHxJlAheF9E0=\");\n_c = QRScannerCameraApp;\nvar _c;\n$RefreshReg$(_c, \"QRScannerCameraApp\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Html5Qrcode","jsxDEV","_jsxDEV","GOOGLE_SCRIPT_URL","QRScannerCameraApp","_s","status","setStatus","log","setLog","qrCodeRegionId","html5QrCodeRef","handleScanSuccess","decodedText","response","fetch","method","headers","body","JSON","stringify","scannedId","result","json","logEntry","id","time","Date","toLocaleTimeString","prev","err","current","getCameras","then","devices","length","start","facingMode","fps","qrbox","stop","clear","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","map","entry","i","_c","$RefreshReg$"],"sources":["C:/Users/abdel/Downloads/qr_attendance_pwa_with_camera/src/QRScannerCameraApp.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { Html5Qrcode } from \"html5-qrcode\";\n\nconst GOOGLE_SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbxg9ya2e1Pf3vAMSGzwgSex0MtA86IU8YVQ5ufLGhGT-LwnkueU56huPiCoenuJVlNYHg/exec\";\n\nexport default function QRScannerCameraApp() {\n  const [status, setStatus] = useState(\"\");\n  const [log, setLog] = useState([]);\n  const qrCodeRegionId = \"reader\";\n  const html5QrCodeRef = useRef(null);\n\n  const handleScanSuccess = async (decodedText) => {\n    try {\n      const response = await fetch(GOOGLE_SCRIPT_URL, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ scannedId: decodedText })\n      });\n\n      const result = await response.json();\n\n      let logEntry = {\n        id: decodedText,\n        time: new Date().toLocaleTimeString()\n      };\n\n      if (result.status === \"already_scanned\") {\n        logEntry.result = \"ALREADY SCANNED\";\n        setStatus(\"Already Scanned\");\n      } else {\n        logEntry.result = \"SENT\";\n        setStatus(\"Submitted\");\n      }\n\n      setLog((prev) => [...prev, logEntry]);\n    } catch (err) {\n      setStatus(\"Error\");\n    }\n  };\n\n  useEffect(() => {\n    html5QrCodeRef.current = new Html5Qrcode(qrCodeRegionId);\n    Html5Qrcode.getCameras().then((devices) => {\n      if (devices && devices.length) {\n        html5QrCodeRef.current.start(\n          { facingMode: \"environment\" },\n          { fps: 10, qrbox: 250 },\n          handleScanSuccess\n        );\n      }\n    });\n\n    return () => {\n      html5QrCodeRef.current.stop().then(() => {\n        html5QrCodeRef.current.clear();\n      });\n    };\n  }, []);\n\n  return (\n    <div>\n      <h2>Scan QR Code</h2>\n      <div id={qrCodeRegionId} style={{ width: \"100%\" }}></div>\n      <p>Status: {status}</p>\n      <ul>\n        {log.map((entry, i) => (\n          <li key={i}>{entry.time} - {entry.id} - {entry.result}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}